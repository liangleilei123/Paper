# 配准



## 配准框架

<img src="E:\Paper\registration\配准.assets\image-20220909142754038.png" alt="image-20220909142754038" style="zoom:67%;" />

Moving image会参照Fixed image来进行一个形变，或者进行一个位置的转化。在这种变化的过程中，他的坐标系会发生一个拉伸或者是形变。在这其中有些区域会丢失到像素，这就需要叫interpolator（插值）的技术。可以用不同的插入方法把确实的像素点进行一个图像的恢复。

在插值之后需要一个测量的标准——Mextric，他是一个记测这两个图像之间相似性的标准，这个标准有很多方法实现。通过这样一个测度，当我们能够找到这两个图像之间的相似性之后，我们可以实现一个转化矩阵对Moving image的形变，实现这种形变达到最优（Optimizer），所以我们需要有一个迭代的，反复的求优的过程，最后实现第一次图像之间的配准的步骤。

在此之后，我们需要把这个图像真实的给它变化到新的坐标下去，然后再实现一个循环，完成我们刚才所说的插值、图像之间的记测、然后求优、最后实现一个新的配准，这样一个反复的迭代，直到最后停止下来，完成图像配准的全部过程。



## 配准分类

- 从维度分
  - 2D-2D,3D-3D，2D-3D
- 按配准的基本特征来分
  - 基于图像本身
    - 外部配准机制（Extrinsic）内部配准机制（Intrinsic）
- 基于转换的属性来分
  - 刚体配准（Rigid）：空间坐标位置的转换，和旋转，有时候也包括放大和缩小，在刚性配准过程中，整个的细节结构没有发生具体的变化。
  - 仿射配准（Affine）：可以剪切，方法和缩小，任意两个对边都是平行的。
  - 投影的配准（Projective）：他的任意两条线之间都可以发生变化，
  - 带曲线的配准（Curved）：允许一条直线和一条曲线之间达成一种配准的方式
- 按交互的方式来分
  - 人机交互的配准，半自动配准，全自动配准
- 按涉及的模态分
  - 单一模态、多模态、Modality to model（标准模型和不同模态之间的配准）
- 按对象分
  - 同一个人的不同时期的成像它们之间的配准、不同个体影像之间的配准、还可以和人体解剖图谱之间的配准
- 按配准的区域分
  - 局部配准和全局配准



## 配准的算法

- 刚性配准和仿射配准
  - 基于特征点。找到两幅图像对应特征点之间的一一对应关系，就能找到两幅图像的配准关系。
  - 基于信息论，熵，互信息，是衡量一个图像中信息多少的标准，可以求取这些值的最大值来获得最优的配准。比如说可以把两个图像之间他们的相对的熵来进行一个核的提取，然后减少他们所含信息量的多少，最后形成这两个图像之间配准的最优化。第一个非常好的测度就是joint entropy——两个图像的相关熵，是衡量图像他们混合之后的信息量的总和。当信息量的总和达到最小的时候，他们之间的配准达到了最好。
    - 互信息，衡量一个图像所含信息的多少，可以用来解释两个图像之间是不是达到最好的匹配。一般是求他们之间的最大值，从而得到他们之间的匹配度。
  - 基于边缘，两个图像之间对应的边缘
  - 基于像素强度：衡量两个图像之间灰度的一致性来实现的配准，计算灰度直方图
- 非刚性配准
  - 基函数，有傅里叶基函数、三角基函数和小波的基函数。基函数可以非常好的来表达图像之间配准存在的形变场。在处理基函数来表达他们之间的线性组合的时候，可以很好的实现一种平滑的约束，进而实现配准。
  - 样条函数

